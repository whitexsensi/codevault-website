<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WHITEX SENSI</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    /* Base Styles */
    * { margin:0; padding:0; box-sizing:border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
    body { background: #f5f5f7; color:#1c1c1e; min-height:100vh; display:flex; justify-content:center; align-items:flex-start; padding-top:50px; }
    .container { width: 95%; max-width: 450px; }

    /* Header */
    header { display:flex; justify-content:center; align-items:center; margin-bottom:30px; }
    .brand { display:flex; align-items:center; gap:12px; }
    .brand-icon { font-size:2rem; color:#636366; }
    .brand-name { font-size:1.5rem; font-weight:600; color:#1c1c1e; }

    /* Search / Token Input */
    .search-container { margin-bottom:30px; }
    .search-box { display:flex; width:100%; border-radius:12px; background:#fff; padding:10px; box-shadow:0 4px 6px rgba(0,0,0,0.1); }
    .search-input { flex:1; border:none; outline:none; font-size:1rem; padding:10px; }
    .search-button { border:none; background:#007aff; color:#fff; padding:10px 15px; border-radius:10px; font-weight:600; cursor:pointer; transition:0.3s; }
    .search-button:hover { background:#005bb5; }

    /* Unlock Steps */
    .unlock-section { background:#fff; border-radius:20px; padding:20px; box-shadow:0 4px 10px rgba(0,0,0,0.08); }
    .section-title { font-size:1.2rem; font-weight:600; margin-bottom:15px; color:#1c1c1e; display:flex; align-items:center; gap:8px; }
    .password-display { display:flex; justify-content:center; gap:10px; margin-bottom:20px; }
    .password-char { width:40px; height:40px; border-radius:8px; background:#f1f1f3; display:flex; justify-content:center; align-items:center; font-weight:600; color:#1c1c1e; }

    .unlock-steps { display:flex; flex-direction:column; gap:15px; }
    .step { background:#f9f9fa; padding:15px; border-radius:15px; display:flex; flex-direction:column; align-items:center; box-shadow:0 2px 6px rgba(0,0,0,0.08); transition:0.3s; }
    .step:hover { box-shadow:0 4px 12px rgba(0,0,0,0.12); }
    .step-number { background:#007aff; color:#fff; width:30px; height:30px; border-radius:50%; display:flex; justify-content:center; align-items:center; font-weight:600; margin-bottom:10px; }
    .step-title { font-weight:600; margin-bottom:5px; }
    .step-description { font-size:0.9rem; color:#636366; text-align:center; margin-bottom:10px; }
    .step-action { padding:8px 15px; border:none; border-radius:10px; background:#007aff; color:#fff; font-weight:600; cursor:pointer; transition:0.3s; }
    .step-action:hover { background:#005bb5; }

    /* Instagram Button */
    .insta-button { margin-top:15px; background:#E1306C; }
    .insta-button:hover { background:#C13584; }

    /* Modal */
    .modal { position:fixed; top:0; left:0; width:100%; height:100%; display:flex; justify-content:center; align-items:center; background:rgba(0,0,0,0.5); opacity:0; visibility:hidden; transition:0.3s; }
    .modal.active { opacity:1; visibility:visible; }
    .modal-content { background:#fff; width:90%; max-width:350px; border-radius:20px; padding:20px; box-shadow:0 4px 15px rgba(0,0,0,0.1); text-align:center; position:relative; }
    .modal-close { position:absolute; top:10px; right:10px; border:none; background:none; font-size:1.3rem; cursor:pointer; color:#1c1c1e; }
    .modal-title { font-weight:600; margin-bottom:10px; }
    .modal-text { font-size:0.9rem; color:#636366; margin-bottom:15px; }
    .modal-button { padding:10px 20px; border:none; border-radius:12px; background:#007aff; color:#fff; font-weight:600; cursor:pointer; transition:0.3s; }
    .modal-button:hover { background:#005bb5; }

    /* Responsive */
    @media(max-width:400px){ .container{padding:10px;} }
</style>
</head>
<body>

<div class="container">
    <header>
        <div class="brand">
            <i class="fas fa-diamond brand-icon"></i>
            <div class="brand-name">WHITEX SENSI</div>
        </div>
    </header>

    <div class="search-container">
        <div class="search-box">
            <input type="text" class="search-input" placeholder="Enter your access code...">
            <button class="search-button">Get Token</button>
        </div>
    </div>

    <div class="unlock-section">
        <h2 class="section-title"><i class="fas fa-lock"></i> Unlock Content</h2>
        <div class="password-display">
            <div class="password-char">*</div>
            <div class="password-char">*</div>
            <div class="password-char">*</div>
            <div class="password-char">*</div>
            <div class="password-char">*</div>
        </div>
        <div class="unlock-steps">
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-title">Get Token</div>
                <div class="step-description">Click the Get Token button to start the process</div>
                <button class="step-action">Get Token</button>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-title">Share with Friends</div>
                <div class="step-description">Share our latest reel with 5 friends</div>
                <button class="step-action">Share</button>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-title">Follow Us</div>
                <div class="step-description">Follow our backup Instagram account</div>
                <button class="step-action">Follow</button>
            </div>
        </div>
    </div>
</div>

<!-- Token Modal -->
<div class="modal" id="token-modal">
    <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h2 class="modal-title">Token Required</h2>
        <p class="modal-text">To access this content, you need to install our app and get a valid token.</p>
        <button class="modal-button" id="install-button">Install App</button>
    </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics.js";

// Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyAA0G63crNGl78SjLnSWIqWTqARNhAoMKI",
  authDomain: "instatool-e71ab.firebaseapp.com",
  projectId: "instatool-e71ab",
  storageBucket: "instatool-e71ab.appspot.com",
  messagingSenderId: "323942632136",
  appId: "1:323942632136:web:7bdb4c6f2e94183a67b3fd",
  measurementId: "G-PS9L97SSQC"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const analytics = getAnalytics(app);

// Token Modal
const searchButton = document.querySelector('.search-button');
const tokenModal = document.getElementById('token-modal');
const modalClose = document.querySelector('.modal-close');
const installButton = document.getElementById('install-button');

searchButton.addEventListener('click', () => { tokenModal.classList.add('active'); });
modalClose.addEventListener('click', () => { tokenModal.classList.remove('active'); });
installButton.addEventListener('click', () => {
    window.location.href = 'https://control.kochava.com/v1/cpi/click?campaign_id=kozz76680281-d2kkq6166023a7a094da&network_id=8411';
});

// Unlock Steps
const stepActions = document.querySelectorAll('.step-action');
const passwordChars = document.querySelectorAll('.password-char');
const password = 'WX$49';

stepActions.forEach((button,index)=>{
    button.addEventListener('click', async ()=>{
        if(index===0){
            passwordChars[0].textContent = password[0];
            button.textContent='Done'; button.style.background='#34c759';
        } else if(index===1){
            passwordChars[1].textContent = password[1];
            passwordChars[2].textContent = password[2];
            button.textContent='Shared'; button.style.background='#34c759';
        } else if(index===2){
            passwordChars[3].textContent = password[3];
            passwordChars[4].textContent = password[4];
            button.textContent='Followed'; button.style.background='#34c759';
            
            setTimeout(()=>{
                alert('Congratulations! You successfully unlocked: WHITEX SENSI App\nPassword: ' + password);
            }, 500);

            // Firestore save (test mode)
            try {
                await setDoc(doc(db, "unlock_logs", Date.now().toString()), {
                    passwordUsed: password,
                    unlockedAt: new Date()
                });
                console.log("Data saved to Firestore successfully (test mode).");
            } catch (e) {
                console.error("Error saving data: ", e);
            }

            // Add Instagram follow button
            const unlockSection = document.querySelector('.unlock-section');
            if(!document.querySelector('.insta-button')){
                const instaButton = document.createElement('button');
                instaButton.className = 'step-action insta-button';
                instaButton.textContent = 'Follow Instagram';
                instaButton.addEventListener('click', ()=>{
                    window.open('https://www.instagram.com/ig_whitex?igsh=cTcxeGU4NGY4YmNl', '_blank');
                });
                unlockSection.appendChild(instaButton);
            }
        }
    });
});
</script>
</body>
</html>